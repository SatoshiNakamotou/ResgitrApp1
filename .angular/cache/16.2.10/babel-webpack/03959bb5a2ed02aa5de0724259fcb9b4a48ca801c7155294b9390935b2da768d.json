{"ast":null,"code":"import _asyncToGenerator from \"F:/A\\xF1o 2023-Semestre2/PROGRAMACION DE APLICACIONES MOVILES/DESARROLLO PROYECTO REGISTRAPP ACTUAL/registrApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { BrowserQRCodeReader } from '@zxing/ngx-scanner';\nimport { Geolocation } from '@capacitor/geolocation';\nlet LoginAlternativoPage = class LoginAlternativoPage {\n  constructor(navCtrl, dataService, sanitizer) {\n    this.navCtrl = navCtrl;\n    this.dataService = dataService;\n    this.sanitizer = sanitizer;\n    this.scannedQRCode = '';\n    this.currentLocation = '';\n    this.fotoURL = null;\n  }\n  ngOnInit() {\n    this.getCurrentLocation();\n    this.authenticatedUser = this.dataService.getAuthenticatedUser(); // Obtén los detalles del usuario autenticado\n    this.scanQRCode(); // Escanear código QR al cargar la página\n  }\n\n  getCurrentLocation() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const coordinates = yield Geolocation.getCurrentPosition();\n        _this.currentLocation = `Latitud: ${coordinates.coords.latitude}, Longitud: ${coordinates.coords.longitude}`;\n        console.log('Ubicación actual:', _this.currentLocation);\n      } catch (error) {\n        console.error('Error al obtener la ubicación:', error);\n      }\n    })();\n  }\n  scanQRCode() {\n    const codeReader = new BrowserQRCodeReader();\n    const videoElement = document.getElementById('videoElement');\n    codeReader.decodeFromVideoDevice(undefined, videoElement, (result, err) => {\n      if (result) {\n        this.scannedQRCode = result.getText();\n        console.log('Código QR escaneado:', this.scannedQRCode);\n      }\n      if (err) {\n        console.error('Error al escanear:', err);\n      }\n    }).catch(err => {\n      console.error('Error al iniciar la cámara:', err);\n    });\n  }\n  navigateLeft() {\n    this.navCtrl.back();\n  }\n  openLink(url) {\n    if (url) {\n      window.open(url, '_blank');\n    }\n  }\n};\nLoginAlternativoPage = __decorate([Component({\n  selector: 'app-login-alternativo',\n  templateUrl: './login-alternativo.page.html',\n  styleUrls: ['./login-alternativo.page.scss']\n})], LoginAlternativoPage);\nexport { LoginAlternativoPage };","map":{"version":3,"names":["Component","BrowserQRCodeReader","Geolocation","LoginAlternativoPage","constructor","navCtrl","dataService","sanitizer","scannedQRCode","currentLocation","fotoURL","ngOnInit","getCurrentLocation","authenticatedUser","getAuthenticatedUser","scanQRCode","_this","_asyncToGenerator","coordinates","getCurrentPosition","coords","latitude","longitude","console","log","error","codeReader","videoElement","document","getElementById","decodeFromVideoDevice","undefined","result","err","getText","catch","navigateLeft","back","openLink","url","window","open","__decorate","selector","templateUrl","styleUrls"],"sources":["F:\\Año 2023-Semestre2\\PROGRAMACION DE APLICACIONES MOVILES\\DESARROLLO PROYECTO REGISTRAPP ACTUAL\\registrApp\\src\\app\\login-alternativo\\login-alternativo.page.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { BrowserQRCodeReader, DecodeContinuouslyCallback } from '@zxing/ngx-scanner';\nimport { NavController } from '@ionic/angular';\nimport { Geolocation, GeolocationPosition } from '@capacitor/geolocation';\nimport { DataService } from '../data.service';\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\n\n@Component({\n  selector: 'app-login-alternativo',\n  templateUrl: './login-alternativo.page.html',\n  styleUrls: ['./login-alternativo.page.scss'],\n})\nexport class LoginAlternativoPage implements OnInit {\n  scannedQRCode: string = '';\n  currentLocation: string = '';\n  authenticatedUser: any; // Variable para almacenar los detalles del usuario autenticado\n  fotoURL: SafeResourceUrl | null = null;\n\n  constructor(\n    private navCtrl: NavController,\n    private dataService: DataService,\n    private sanitizer: DomSanitizer\n  ) {}\n\n  ngOnInit() {\n    this.getCurrentLocation();\n    this.authenticatedUser = this.dataService.getAuthenticatedUser(); // Obtén los detalles del usuario autenticado\n    this.scanQRCode(); // Escanear código QR al cargar la página\n  }\n\n  async getCurrentLocation() {\n    try {\n      const coordinates: GeolocationPosition = await Geolocation.getCurrentPosition();\n      this.currentLocation = `Latitud: ${coordinates.coords.latitude}, Longitud: ${coordinates.coords.longitude}`;\n      console.log('Ubicación actual:', this.currentLocation);\n    } catch (error) {\n      console.error('Error al obtener la ubicación:', error);\n    }\n  }\n\n  scanQRCode() {\n    const codeReader = new BrowserQRCodeReader();\n    const videoElement = document.getElementById('videoElement') as HTMLVideoElement;\n\n    codeReader\n      .decodeFromVideoDevice(undefined, videoElement, (result, err) => {\n        if (result) {\n          this.scannedQRCode = result.getText();\n          console.log('Código QR escaneado:', this.scannedQRCode);\n        }\n        if (err) {\n          console.error('Error al escanear:', err);\n        }\n      })\n      .catch((err) => {\n        console.error('Error al iniciar la cámara:', err);\n      });\n  }\n\n  navigateLeft() {\n    this.navCtrl.back();\n  }\n\n  openLink(url: string) {\n    if (url) {\n      window.open(url, '_blank');\n    }\n  }\n}\n"],"mappings":";;AAAA,SAASA,SAAS,QAAgB,eAAe;AACjD,SAASC,mBAAmB,QAAoC,oBAAoB;AAEpF,SAASC,WAAW,QAA6B,wBAAwB;AASzE,IAAaC,oBAAoB,GAAjC,MAAaA,oBAAoB;EAM/BC,YACUC,OAAsB,EACtBC,WAAwB,EACxBC,SAAuB;IAFvB,KAAAF,OAAO,GAAPA,OAAO;IACP,KAAAC,WAAW,GAAXA,WAAW;IACX,KAAAC,SAAS,GAATA,SAAS;IARnB,KAAAC,aAAa,GAAW,EAAE;IAC1B,KAAAC,eAAe,GAAW,EAAE;IAE5B,KAAAC,OAAO,GAA2B,IAAI;EAMnC;EAEHC,QAAQA,CAAA;IACN,IAAI,CAACC,kBAAkB,EAAE;IACzB,IAAI,CAACC,iBAAiB,GAAG,IAAI,CAACP,WAAW,CAACQ,oBAAoB,EAAE,CAAC,CAAC;IAClE,IAAI,CAACC,UAAU,EAAE,CAAC,CAAC;EACrB;;EAEMH,kBAAkBA,CAAA;IAAA,IAAAI,KAAA;IAAA,OAAAC,iBAAA;MACtB,IAAI;QACF,MAAMC,WAAW,SAA8BhB,WAAW,CAACiB,kBAAkB,EAAE;QAC/EH,KAAI,CAACP,eAAe,GAAG,YAAYS,WAAW,CAACE,MAAM,CAACC,QAAQ,eAAeH,WAAW,CAACE,MAAM,CAACE,SAAS,EAAE;QAC3GC,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAER,KAAI,CAACP,eAAe,CAAC;OACvD,CAAC,OAAOgB,KAAK,EAAE;QACdF,OAAO,CAACE,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;;IACvD;EACH;EAEAV,UAAUA,CAAA;IACR,MAAMW,UAAU,GAAG,IAAIzB,mBAAmB,EAAE;IAC5C,MAAM0B,YAAY,GAAGC,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAqB;IAEhFH,UAAU,CACPI,qBAAqB,CAACC,SAAS,EAAEJ,YAAY,EAAE,CAACK,MAAM,EAAEC,GAAG,KAAI;MAC9D,IAAID,MAAM,EAAE;QACV,IAAI,CAACxB,aAAa,GAAGwB,MAAM,CAACE,OAAO,EAAE;QACrCX,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAE,IAAI,CAAChB,aAAa,CAAC;;MAEzD,IAAIyB,GAAG,EAAE;QACPV,OAAO,CAACE,KAAK,CAAC,oBAAoB,EAAEQ,GAAG,CAAC;;IAE5C,CAAC,CAAC,CACDE,KAAK,CAAEF,GAAG,IAAI;MACbV,OAAO,CAACE,KAAK,CAAC,6BAA6B,EAAEQ,GAAG,CAAC;IACnD,CAAC,CAAC;EACN;EAEAG,YAAYA,CAAA;IACV,IAAI,CAAC/B,OAAO,CAACgC,IAAI,EAAE;EACrB;EAEAC,QAAQA,CAACC,GAAW;IAClB,IAAIA,GAAG,EAAE;MACPC,MAAM,CAACC,IAAI,CAACF,GAAG,EAAE,QAAQ,CAAC;;EAE9B;CACD;AAxDYpC,oBAAoB,GAAAuC,UAAA,EALhC1C,SAAS,CAAC;EACT2C,QAAQ,EAAE,uBAAuB;EACjCC,WAAW,EAAE,+BAA+B;EAC5CC,SAAS,EAAE,CAAC,+BAA+B;CAC5C,CAAC,C,EACW1C,oBAAoB,CAwDhC;SAxDYA,oBAAoB"},"metadata":{},"sourceType":"module","externalDependencies":[]}